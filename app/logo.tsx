


"use client"

import { useEffect, useRef } from "react"
import { gsap } from "gsap"

export default function LogoAnimated() {
    const svgRef = useRef<SVGSVGElement>(null)
    const shineRef = useRef<SVGRectElement>(null)

    useEffect(() => {
        if (!svgRef.current) return

        const paths = svgRef.current.querySelectorAll("path, line, polyline, polygon, circle")

        // Initial state
        paths.forEach((path) => {
            const length = (path as SVGPathElement).getTotalLength?.() || 1000
            gsap.set(path, {
                strokeDasharray: length,
                strokeDashoffset: length,
            })
        })

        const tl = gsap.timeline({ repeat: -1, defaults: { ease: "power2.out" } })

        tl.to(paths, {
            strokeDashoffset: 0,
            duration: 1.5,
            stagger: 0.05,
        })

        // Brillance
        if (shineRef.current) {
            tl.fromTo(
                shineRef.current,
                {
                    x: "-150%",
                },
                {
                    x: "150%",
                    duration: 1,
                    ease: "power1.inOut",
                },
                "<0.2" // start shortly after stroke is complete
            )
        }

        // Détraçage
        tl.to(paths, {
            strokeDashoffset: (i, t) => t.getTotalLength?.() || 1000,
            duration: 1.5,
            stagger: 0.03,
        })

        return () => {
            tl.kill()
        }
    }, [])

    return (
            <svg
                ref={svgRef}
                viewBox="0 0 51 51"
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                stroke="#E1E1E1"
                strokeWidth="0.5"
                className="w-full h-full overflow-hidden"
            >
                <g clip-path="url(#clip0_2_110)">
                    <path d="M51 0H0V51H51V0Z" fill="#1B2128" />
                    <path d="M16.6296 39.6707C15.7068 39.6707 14.9296 39.3429 14.2982 38.6871C13.6668 38.007 13.3511 37.1692 13.3511 36.1736V14.8629C13.3511 13.8672 13.6668 13.0293 14.2982 12.3493C14.9539 11.6693 15.7311 11.3293 16.6296 11.3293H19.6896C20.6368 11.3293 21.4261 11.6814 22.0575 12.3857C22.7132 13.0657 23.0411 13.8914 23.0411 14.8629V20.0721H27.9589V14.8629C27.9589 13.8672 28.2747 13.0293 28.9061 12.3493C29.5375 11.6693 30.3147 11.3293 31.2375 11.3293H34.2975C35.2689 11.3293 36.0704 11.6814 36.7018 12.3857C37.3331 13.0657 37.6489 13.8914 37.6489 14.8629V36.1736C37.6489 37.1451 37.3211 37.9706 36.6654 38.6507C36.0096 39.3308 35.2203 39.6707 34.2975 39.6707H31.1646C30.2661 39.6707 29.5011 39.3429 28.8696 38.6871C28.2382 38.007 27.9225 37.1692 27.9225 36.1736V29.9807H25.8825C24.9354 29.9807 24.1461 29.7136 23.5146 29.1793C22.8832 28.645 22.5675 27.9164 22.5675 26.9936C22.5675 26.8479 22.6404 26.775 22.7861 26.775C22.9318 26.775 23.0046 26.8479 23.0046 26.9936C23.0046 27.795 23.2718 28.4264 23.8061 28.8879C24.3646 29.325 25.0568 29.5436 25.8825 29.5436H28.0682C28.2625 29.5436 28.3596 29.6407 28.3596 29.835V36.1736C28.3596 37.0479 28.6268 37.7764 29.1611 38.3593C29.6954 38.9421 30.3632 39.2336 31.1646 39.2336H34.2975C35.1232 39.2336 35.8154 38.9421 36.3739 38.3593C36.9324 37.7764 37.2118 37.0479 37.2118 36.1736V14.8629C37.2118 14.0129 36.9324 13.2843 36.3739 12.6771C35.8154 12.07 35.1232 11.7664 34.2975 11.7664H31.2375C30.4361 11.7664 29.7561 12.07 29.1975 12.6771C28.6632 13.2843 28.3961 14.0129 28.3961 14.8629V20.3271C28.3961 20.4486 28.3232 20.5093 28.1775 20.5093H22.7861C22.6647 20.5093 22.6039 20.4486 22.6039 20.3271V14.8629C22.6039 14.0129 22.3246 13.2843 21.7661 12.6771C21.2075 12.07 20.5154 11.7664 19.6896 11.7664H16.6296C15.8282 11.7664 15.1482 12.07 14.5896 12.6771C14.0553 13.2843 13.7882 14.0129 13.7882 14.8629V36.1736C13.7882 37.0479 14.0553 37.7764 14.5896 38.3593C15.1482 38.9421 15.8282 39.2336 16.6296 39.2336H19.7625C20.5882 39.2336 21.2804 38.9421 21.8389 38.3593C22.3975 37.7764 22.6768 37.0479 22.6768 36.1736V31.1829C22.6768 31.0371 22.7496 30.9643 22.8954 30.9643C23.0411 30.9643 23.1139 31.0371 23.1139 31.1829V36.1736C23.1139 37.1692 22.7861 38.007 22.1304 38.6871C21.4989 39.3429 20.7096 39.6707 19.7625 39.6707H16.6296Z" fill="none" />
                    <path d="M16.6296 39.6707C15.7068 39.6707 14.9296 39.3429 14.2982 38.6871C13.6668 38.007 13.3511 37.1692 13.3511 36.1736V14.8629C13.3511 13.8672 13.6668 13.0293 14.2982 12.3493C14.9539 11.6693 15.7311 11.3293 16.6296 11.3293H19.6896C20.6368 11.3293 21.4261 11.6814 22.0575 12.3857C22.7132 13.0657 23.0411 13.8914 23.0411 14.8629V20.0721H27.9589V14.8629C27.9589 13.8672 28.2747 13.0293 28.9061 12.3493C29.5375 11.6693 30.3147 11.3293 31.2375 11.3293H34.2975C35.2689 11.3293 36.0704 11.6814 36.7018 12.3857C37.3331 13.0657 37.6489 13.8914 37.6489 14.8629V36.1736C37.6489 37.1451 37.3211 37.9706 36.6654 38.6507C36.0096 39.3308 35.2203 39.6707 34.2975 39.6707H31.1646C30.2661 39.6707 29.5011 39.3429 28.8696 38.6871C28.2382 38.007 27.9225 37.1692 27.9225 36.1736V29.9807H25.8825C24.9354 29.9807 24.1461 29.7136 23.5146 29.1793C22.8832 28.645 22.5675 27.9164 22.5675 26.9936C22.5675 26.8479 22.6404 26.775 22.7861 26.775C22.9318 26.775 23.0046 26.8479 23.0046 26.9936C23.0046 27.795 23.2718 28.4264 23.8061 28.8879C24.3646 29.325 25.0568 29.5436 25.8825 29.5436H28.0682C28.2625 29.5436 28.3596 29.6407 28.3596 29.835V36.1736C28.3596 37.0479 28.6268 37.7764 29.1611 38.3593C29.6954 38.9421 30.3632 39.2336 31.1646 39.2336H34.2975C35.1232 39.2336 35.8154 38.9421 36.3739 38.3593C36.9324 37.7764 37.2118 37.0479 37.2118 36.1736V14.8629C37.2118 14.0129 36.9324 13.2843 36.3739 12.6771C35.8154 12.07 35.1232 11.7664 34.2975 11.7664H31.2375C30.4361 11.7664 29.7561 12.07 29.1975 12.6771C28.6632 13.2843 28.3961 14.0129 28.3961 14.8629V20.3271C28.3961 20.4486 28.3232 20.5093 28.1775 20.5093H22.7861C22.6647 20.5093 22.6039 20.4486 22.6039 20.3271V14.8629C22.6039 14.0129 22.3246 13.2843 21.7661 12.6771C21.2075 12.07 20.5154 11.7664 19.6896 11.7664H16.6296C15.8282 11.7664 15.1482 12.07 14.5896 12.6771C14.0553 13.2843 13.7882 14.0129 13.7882 14.8629V36.1736C13.7882 37.0479 14.0553 37.7764 14.5896 38.3593C15.1482 38.9421 15.8282 39.2336 16.6296 39.2336H19.7625C20.5882 39.2336 21.2804 38.9421 21.8389 38.3593C22.3975 37.7764 22.6768 37.0479 22.6768 36.1736V31.1829C22.6768 31.0371 22.7496 30.9643 22.8954 30.9643C23.0411 30.9643 23.1139 31.0371 23.1139 31.1829V36.1736C23.1139 37.1692 22.7861 38.007 22.1304 38.6871C21.4989 39.3429 20.7096 39.6707 19.7625 39.6707H16.6296Z" fill="none" />
                </g>
            </svg>
    )
}
